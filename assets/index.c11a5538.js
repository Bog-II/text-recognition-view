const e=document.getElementById("credentials"),t=(new Date).getFullYear().toString();e.innerText=`Â© ${t}, Bog-II`;const n=window.Tesseract,i=document.getElementById("upload-icon-svg"),o=document.getElementById("uploaded-image"),a=document.getElementById("upload-description"),s=document.getElementById("submit-extract"),d=document.querySelector("#input-image"),r=document.getElementById("input-image-container"),l=document.getElementById("language-select"),c=document.getElementById("whitelist-characters"),u=document.getElementById("result-container"),m=document.getElementById("result-content"),g=document.getElementById("progressbar"),y=document.getElementById("progressbar-container"),v=document.getElementById("progress-statue"),E=document.getElementById("copy-to-clipoard"),p=document.getElementById("download-result"),w=()=>{r.classList.remove("blue-box-shadow")};d.addEventListener("dragenter",(()=>{r.classList.add("blue-box-shadow")}),!1),d.addEventListener("dragleave",w,!1),d.addEventListener("drop",w,!1),d.addEventListener("change",(e=>{const t=e.target.files[0];o.src=URL.createObjectURL(t),v.innerText=""})),d.addEventListener("change",(()=>{o.style.display="block",a.style.display="none",i.style.display="none",a.remove(),i.remove(),y.style.visibility="visible"}),{once:!0});const b=(e,t,n)=>{e.classList.add(t),setTimeout((()=>{e.classList.remove(t)}),n)};s.onclick=()=>{const e=d.files[0];if(null!=e){const t=c.value,n=l.value;g.style.visibility="visible",g.value=0,v.innerText="0%",h(e,n,t)}else b(r,"red-box-shadow",1400)};E.addEventListener("click",(()=>{const e=m.innerText;navigator.clipboard.writeText(e)}));p.addEventListener("click",(function(){const e=m.innerText;((e,t)=>{const n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),n.remove()})(l.value+"-"+Date.now().toString(),e)}),!1);const I=e=>{if("recognizing text"===e.status){const t=e.progress;g.value=t,v.innerText=Math.round(100*t).toString()+"%"}},h=async(e,t,i="")=>{const o=n.createWorker({logger:I}),a=Date.now();await o.load(),await o.loadLanguage(t),await o.initialize(t),await o.setParameters({tessedit_char_whitelist:i});const{data:{text:s}}=await o.recognize(e);m.innerText=s,b(u,"green-box-shadow",3e3);const d=Date.now()-a;v.innerText="Finished in "+(e=>{const t=e.toString();if(e<1e3)return t+"ms";const n=t.length;return t.slice(0,n-3)+"."+t.slice(n-3)+"s"})(d),g.style.visibility="hidden",await o.terminate()};
